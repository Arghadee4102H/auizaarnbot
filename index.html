<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Auiz Aarn Bot</title>
    <link rel="stylesheet" href="style.css">
    <!-- Telegram Web App script -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Monetag Ads SDK -->
    <script src='//libtl.com/sdk.js' data-zone='9405037' data-sdk='show_9405037'></script>
</head>
<body>

    <!-- Loading Overlay -->
    <div id="loader-overlay">
        <div class="spinner"></div>
        <p>Initializing Auiz Aarn...</p>
    </div>

    <!-- Main App Container -->
    <div id="app-container" class="hidden">
        <main id="main-content">
            <!-- üë§ Profile Section -->
            <section id="profile-section" class="page active">
                <div class="page-header">
                    <h1>üë§ Profile</h1>
                </div>
                <div class="card">
                    <div class="profile-info-item"><span>Username:</span> <strong id="profile-username">Loading...</strong></div>
                    <div class="profile-info-item"><span>User ID:</span> <strong id="profile-userid">Loading...</strong></div>
                </div>
                <div class="card">
                    <div class="profile-stats">
                        <div class="stat-item">
                            <span class="stat-value" id="profile-points">0</span>
                            <span class="stat-label">Total Points</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="profile-energy">0/5</span>
                            <span class="stat-label">Energy</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="profile-quiz-limit">0/15</span>
                            <span class="stat-label">Daily Quizzes</span>
                        </div>
                         <div class="stat-item">
                            <span class="stat-value" id="profile-referrals">0</span>
                            <span class="stat-label">Total Referrals</span>
                        </div>
                    </div>
                </div>
                 <div class="card">
                    <div class="profile-info-item"><span>Your Referral Code:</span> <strong id="profile-referral-code">...</strong></div>
                </div>
            </section>

            <!-- üéÆ Quiz Section -->
            <section id="quiz-section" class="page">
                <div id="quiz-home">
                    <div class="page-header">
                        <h1>üéÆ Quiz Arena</h1>
                    </div>
                    <div class="card quiz-card">
                        <p>Answer questions to earn points!</p>
                        <p>‚úÖ Correct: <strong>+5 Points</strong></p>
                        <p>‚ùå Wrong: <strong>+1 Point</strong> (and lose 1 energy)</p>
                        <button id="start-quiz-btn" class="action-btn">Start Quiz</button>
                    </div>
                </div>
                <div id="quiz-game" class="hidden">
                    <div id="timer-container">
                        <div id="timer-bar"></div>
                    </div>
                    <div id="question-container">
                        <h2 id="question-text"></h2>
                    </div>
                    <div id="options-container">
                        <!-- Options will be generated by JS -->
                    </div>
                </div>
                <div id="quiz-feedback" class="feedback-overlay hidden">
                    <div class="feedback-content">
                        <h2 id="feedback-title"></h2>
                        <p id="feedback-text"></p>
                        <button id="next-question-btn">Continue</button>
                    </div>
                </div>
            </section>

            <!-- ‚öúÔ∏è Premium Section -->
            <section id="premium-section" class="page">
                <div class="page-header">
                    <h1>‚öúÔ∏è Premium & Tasks</h1>
                </div>
                
                <div class="premium-card free-task">
                    <h3>Daily Free Task</h3>
                    <p>Join our Telegram Channel for <strong>+5 points</strong>. (Once per day)</p>
                    <button id="join-channel-btn" class="task-btn">Join & Claim</button>
                </div>
                
                <div class="premium-card ad-task">
                    <h3>Watch Ads for Rewards</h3>
                    <p>Get extra limits for today by watching a short ad.</p>
                    <button id="watch-ad-quiz-btn" class="task-btn">Get +1 Quiz Limit (3/day)</button>
                    <button id="watch-ad-energy-btn" class="task-btn">Get +1 Energy (5/day)</button>
                </div>

                <div class="premium-card stars-task">
                    <h3>Boost with Telegram Stars ‚òÖ</h3>
                    <p>Use stars for powerful, instant boosts!</p>
                    <button class="stars-btn" data-type="boost">‚òÖ 1: Boost Premium (+1 Quiz)</button>
                    <button class="stars-btn" data-type="day">‚òÖ 15: Day Premium (+20 Quiz, +7 Energy)</button>
                    <button class="stars-btn" data-type="week">‚òÖ 100: Weekly Premium (+145 Quiz, +7 Energy)</button>
                </div>
            </section>

            <!-- üë• Referral Section -->
            <section id="referral-section" class="page">
                <div class="page-header"><h1>üë• Referrals</h1></div>
                <div class="card">
                    <h3>Your Referral Link</h3>
                    <p>Share your link and earn <strong>10 points</strong> for every friend who joins. Your friend gets <strong>5 points</strong>!</p>
                    <div class="referral-box">
                        <input type="text" id="referral-link-input" readonly>
                        <button id="copy-referral-btn">Copy</button>
                    </div>
                    <button id="share-referral-btn" class="action-btn">Share Link</button>
                </div>
                <div class="card">
                    <h3>Used a Referral Code?</h3>
                    <p>If a friend referred you, enter their code here once to get <strong>5 points</strong>.</p>
                    <div id="submit-referral-container">
                        <input type="text" id="submit-referral-input" placeholder="Enter code (e.g., AGuttu4102H)">
                        <button id="submit-referral-btn">Submit</button>
                    </div>
                </div>
            </section>

            <!-- ‚åõ History Section -->
            <section id="history-section" class="page">
                <div class="page-header"><h1>‚åõ History</h1></div>
                <div class="history-toggle">
                    <button class="toggle-btn active" data-target="points-history-container">Points</button>
                    <button class="toggle-btn" data-target="withdrawal-history-container">Withdrawals</button>
                </div>
                <div id="points-history-container" class="history-container">
                    <!-- Points history will be populated by JS -->
                </div>
                <div id="withdrawal-history-container" class="history-container hidden">
                    <!-- Withdrawal history will be populated by JS -->
                </div>
            </section>

            <!-- üí∏ Withdraw Section -->
            <section id="withdraw-section" class="page">
                <div class="page-header"><h1>üí∏ Withdraw</h1></div>
                <div class="card">
                    <h3>Withdrawal Options</h3>
                    <p>Minimum points required for withdrawal. The first option is a one-time offer!</p>
                    <div class="withdraw-options">
                        <button class="withdraw-btn" data-points="740" data-usd="0.10">740 P ($0.10) (First Time Only)</button>
                        <button class="withdraw-btn" data-points="2700" data-usd="1.00">2700 P ($1.00)</button>
                        <button class="withdraw-btn" data-points="5200" data-usd="2.00">5200 P ($2.00)</button>
                        <button class="withdraw-btn" data-points="10300" data-usd="3.50">10300 P ($3.50)</button>
                    </div>
                </div>
                <div id="withdraw-form-container" class="card hidden">
                    <h3>Withdraw <span id="withdraw-amount-text"></span></h3>
                    <form id="withdraw-form">
                        <label>Payment Method:</label>
                        <div class="payment-method-selector">
                           <input type="radio" id="ton-wallet" name="payment-method" value="TON" checked>
                           <label for="ton-wallet">TON Wallet</label>
                           <input type="radio" id="binance-pay" name="payment-method" value="Binance">
                           <label for="binance-pay">Binance Pay</label>
                        </div>
                        <input type="text" id="payment-address" placeholder="Enter your TON wallet address" required>
                        <button type="submit" id="submit-withdraw-btn" class="action-btn">Submit Request</button>
                    </form>
                </div>
            </section>

        </main>

        <!-- Bottom Navigation Bar -->
        <nav id="bottom-nav">
            <button class="nav-btn active" data-target="profile-section">üë§<span>Profile</span></button>
            <button class="nav-btn" data-target="quiz-section">üéÆ<span>Quiz</span></button>
            <button class="nav-btn" data-target="premium-section">‚öúÔ∏è<span>Premium</span></button>
            <button class="nav-btn" data-target="referral-section">üë•<span>Referral</span></button>
            <button class="nav-btn" data-target="history-section">‚åõ<span>History</span></button>
            <button class="nav-btn" data-target="withdraw-section">üí∏<span>Withdraw</span></button>
        </nav>
    </div>

    <!-- Generic Modal for Popups -->
    <div id="custom-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2 id="modal-title">Notification</h2>
            <p id="modal-text">This is a message.</p>
            <button id="modal-close-btn">Close</button>
        </div>
    </div>


    <!-- Firebase SDK (Make sure to use the latest version from your Firebase project) -->
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>

    <!-- App Scripts -->
    <script src="questions.js"></script>
    <script src="script.js"></script>
</body>
</html>